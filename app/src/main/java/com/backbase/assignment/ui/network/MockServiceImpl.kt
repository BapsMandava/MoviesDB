package com.backbase.assignment.ui.network

import android.provider.SyncStateContract
import com.backbase.assignment.ui.Constants
import com.backbase.assignment.ui.model.MoviePlayingResult
import com.backbase.assignment.ui.model.MoviesDetailsResult
import com.google.gson.Gson
import io.reactivex.Observable
import retrofit2.mock.BehaviorDelegate

/**
 * Mock service Interface
 *
 */
class MockServiceImpl(private val delegate: BehaviorDelegate<ServiceInterface>) : ServiceInterface {

    override fun fetchNowPlayingList(
        language: String,
        pageNo: String,
        apiKey: String
    ): Observable<MoviePlayingResult>? {
        var json:String= getNowPlayingMovieListMockJSON()

        val mockResponse= Gson().fromJson(json, MoviesDetailsResult::class.java)
        return delegate.returningResponse(mockResponse).fetchNowPlayingList()
    }

    override fun fetchPopularPlayingList(
        language: String,
        pageNo: Int,
        apiKey: String
    ): Observable<MoviePlayingResult> {
        TODO("Not yet implemented")
    }

    override fun fetchMovieDetails(
        movie_id: Int?,
        apiKey: String
    ): Observable<MoviesDetailsResult> {
        var json:String= getMovieDetailsJson()

        val mockResponse= Gson().fromJson(json, MoviesDetailsResult::class.java)
        return delegate.returningResponse(mockResponse).fetchMovieDetails(movie_id)
    }


    private fun getMovieDetailsJson():String{
        return "{\"adult\":false,\"backdrop_path\":\"/x4UkhIQuHIJyeeOTdcbZ3t3gBSa.jpg\",\"belongs_to_collection\":null,\"budget\":0,\"genres\":[{\"id\":28,\"name\":\"Action\"}],\"homepage\":\"\",\"id\":718444,\"imdb_id\":\"tt11576124\",\"original_language\":\"en\",\"original_title\":\"Rogue\",\"overview\":\"Battle-hardened O’Hara leads a lively mercenary team of soldiers on a daring mission: rescue hostages from their captors in remote Africa. But as the mission goes awry and the team is stranded, O’Hara’s squad must face a bloody, brutal encounter with a gang of rebels.\",\"popularity\":1442.713,\"poster_path\":\"/zVncJzXzwIO15YM1WilqYn30r54.jpg\",\"production_companies\":[{\"id\":17302,\"logo_path\":null,\"name\":\"Mannequin Pictures\",\"origin_country\":\"\"},{\"id\":67260,\"logo_path\":null,\"name\":\"The Electric Shadow Company\",\"origin_country\":\"\"}],\"production_countries\":[{\"iso_3166_1\":\"ZA\",\"name\":\"South Africa\"},{\"iso_3166_1\":\"GB\",\"name\":\"United Kingdom\"}],\"release_date\":\"2020-08-20\",\"revenue\":0,\"runtime\":106,\"spoken_languages\":[{\"iso_639_1\":\"es\",\"name\":\"Español\"},{\"iso_639_1\":\"en\",\"name\":\"English\"}],\"status\":\"Released\",\"tagline\":\"When the hunter becomes the prey\",\"title\":\"Rogue\",\"video\":false,\"vote_average\":5.9,\"vote_count\":161}"
    }


    private fun getNowPlayingMovieListMockJSON():String{
        return "{\"results\":[{\"popularity\":1442.713,\"vote_count\":161,\"video\":false,\"poster_path\":\"\\/zVncJzXzwIO15YM1WilqYn30r54.jpg\",\"id\":718444,\"adult\":false,\"backdrop_path\":\"\\/x4UkhIQuHIJyeeOTdcbZ3t3gBSa.jpg\",\"original_language\":\"en\",\"original_title\":\"Rogue\",\"genre_ids\":[28],\"title\":\"Rogue\",\"vote_average\":5.9,\"overview\":\"Battle-hardened O’Hara leads a lively mercenary team of soldiers on a daring mission: rescue hostages from their captors in remote Africa. But as the mission goes awry and the team is stranded, O’Hara’s squad must face a bloody, brutal encounter with a gang of rebels.\",\"release_date\":\"2020-08-20\"},{\"popularity\":966.914,\"vote_count\":1112,\"video\":false,\"poster_path\":\"\\/TnOeov4w0sTtV2gqICqIxVi74V.jpg\",\"id\":605116,\"adult\":false,\"backdrop_path\":\"\\/qVygtf2vU15L2yKS4Ke44U4oMdD.jpg\",\"original_language\":\"en\",\"original_title\":\"Project Power\",\"genre_ids\":[28,80,878],\"title\":\"Project Power\",\"vote_average\":6.7,\"overview\":\"An ex-soldier, a teen and a cop collide in New Orleans as they hunt for the source behind a dangerous new pill that grants users temporary superpowers.\",\"release_date\":\"2020-08-14\"},{\"popularity\":887.885,\"vote_count\":352,\"video\":false,\"poster_path\":\"\\/sy6DvAu72kjoseZEjocnm2ZZ09i.jpg\",\"id\":581392,\"adult\":false,\"backdrop_path\":\"\\/gEjNlhZhyHeto6Fy5wWy5Uk3A9D.jpg\",\"original_language\":\"ko\",\"original_title\":\"반도\",\"genre_ids\":[28,27,53],\"title\":\"Peninsula\",\"vote_average\":7.2,\"overview\":\"A soldier and his team battle hordes of post-apocalyptic zombies in the wastelands of the Korean Peninsula\",\"release_date\":\"2020-07-15\"},{\"popularity\":779.919,\"vote_count\":56,\"video\":false,\"poster_path\":\"\\/eDnHgozW8vfOaLHzfpHluf1GZCW.jpg\",\"id\":606234,\"adult\":false,\"backdrop_path\":\"\\/u9YEh2xVAPVTKoaMNlB5tH6pXkm.jpg\",\"original_language\":\"en\",\"original_title\":\"Archive\",\"genre_ids\":[878],\"title\":\"Archive\",\"vote_average\":6,\"overview\":\"2038: George Almore is working on a true human-equivalent AI, and his latest prototype is almost ready. This sensitive phase is also the riskiest as he has a goal that must be hidden at all costs—being reunited with his dead wife.\",\"release_date\":\"2020-08-13\"},{\"popularity\":806.722,\"vote_count\":153,\"video\":false,\"poster_path\":\"\\/tM4hht0LdY06UbuxGR4LjK6adCD.jpg\",\"id\":613504,\"adult\":false,\"backdrop_path\":\"\\/dZJJDmiwp0W1NE74SY5WV00v0Ec.jpg\",\"original_language\":\"en\",\"original_title\":\"After We Collided\",\"genre_ids\":[18,10749],\"title\":\"After We Collided\",\"vote_average\":7.2,\"overview\":\"Tessa finds herself struggling with her complicated relationship with Hardin; she faces a dilemma that could change their lives forever.\",\"release_date\":\"2020-09-02\"},{\"popularity\":756.626,\"vote_count\":221,\"video\":false,\"poster_path\":\"\\/uGhQ2ZGBpzCj6wC5jUrybsZuPTI.jpg\",\"id\":539885,\"adult\":false,\"backdrop_path\":\"\\/ekkuqt9Q2ad1F7xq2ZONP0oq36P.jpg\",\"original_language\":\"en\",\"original_title\":\"Ava\",\"genre_ids\":[28,80,18,53],\"title\":\"Ava\",\"vote_average\":6.1,\"overview\":\"A black ops assassin is forced to fight for her own survival after a job goes dangerously wrong.\",\"release_date\":\"2020-08-06\"},{\"popularity\":486.444,\"vote_count\":71,\"video\":false,\"poster_path\":\"\\/5pe30v0z4ucVgwh5nR439cCzwwO.jpg\",\"id\":632618,\"adult\":false,\"backdrop_path\":\"\\/cVdYaAQmd5DZNdo0KFJruz7JpUs.jpg\",\"original_language\":\"es\",\"original_title\":\"Crímenes de familia\",\"genre_ids\":[80,18,53],\"title\":\"The Crimes That Bind\",\"vote_average\":6.9,\"overview\":\"When her son is accused of raping and trying to murder his ex-wife, Alicia embarks on a journey that will change her life forever.\",\"release_date\":\"2020-08-20\"},{\"popularity\":443.79,\"vote_count\":580,\"video\":false,\"poster_path\":\"\\/jHo2M1OiH9Re33jYtUQdfzPeUkx.jpg\",\"id\":385103,\"adult\":false,\"backdrop_path\":\"\\/fKtYXUhX5fxMxzQfyUcQW9Shik6.jpg\",\"original_language\":\"en\",\"original_title\":\"Scoob!\",\"genre_ids\":[12,16,35,10751],\"title\":\"Scoob!\",\"vote_average\":7.4,\"overview\":\"In Scooby-Doo’s greatest adventure yet, see the never-before told story of how lifelong friends Scooby and Shaggy first met and how they joined forces with young detectives Fred, Velma, and Daphne to form the famous Mystery Inc. Now, with hundreds of cases solved, Scooby and the gang face their biggest, toughest mystery ever: an evil plot to unleash the ghost dog Cerberus upon the world. As they race to stop this global “dogpocalypse,” the gang discovers that Scooby has a secret legacy and an epic destiny greater than anyone ever imagined.\",\"release_date\":\"2020-07-08\"},{\"popularity\":396.457,\"vote_count\":121,\"video\":false,\"poster_path\":\"\\/4V2nTPfeB59TcqJcUfQ9ziTi7VN.jpg\",\"id\":501979,\"adult\":false,\"backdrop_path\":\"\\/oazPqs1z78LcIOFslbKtJLGlueo.jpg\",\"original_language\":\"en\",\"original_title\":\"Bill & Ted Face the Music\",\"genre_ids\":[12,35,878],\"title\":\"Bill & Ted Face the Music\",\"vote_average\":6.5,\"overview\":\"Yet to fulfill their rock and roll destiny, the now middle-aged best friends Bill and Ted set out on a new adventure when a visitor from the future warns them that only their song can save life as we know it. Along the way, they are helped by their daughters, a new batch of historical figures and a few music legends—to seek the song that will set their world right and bring harmony to the universe.\",\"release_date\":\"2020-08-27\"},{\"popularity\":453.312,\"vote_count\":67,\"video\":false,\"poster_path\":\"\\/bhNHCeJDFDaB00A46AoCw2mggdE.jpg\",\"id\":601165,\"adult\":false,\"backdrop_path\":\"\\/nxxODhq9I05Ze9uLONGvfDrzaUO.jpg\",\"original_language\":\"en\",\"original_title\":\"Legacy of Lies\",\"genre_ids\":[28,53],\"title\":\"Legacy of Lies\",\"vote_average\":6,\"overview\":\"An ex-MI6 agent is thrown back into the world of espionage and high stakes to uncover the shocking truth about operations conducted by unknown secret services.\",\"release_date\":\"2020-08-06\"},{\"popularity\":399.929,\"vote_count\":125,\"video\":false,\"poster_path\":\"\\/3eg0kGC2Xh0vhydJHO37Sp4cmMt.jpg\",\"id\":531499,\"adult\":false,\"backdrop_path\":\"\\/zogWnCSztU8xvabaepQnAwsOtOt.jpg\",\"original_language\":\"en\",\"original_title\":\"The Tax Collector\",\"genre_ids\":[28,80,18],\"title\":\"The Tax Collector\",\"vote_average\":6,\"overview\":\"David Cuevas is a family man who works as a gangland tax collector for high ranking Los Angeles gang members. He makes collections across the city with his partner Creeper making sure people pay up or will see retaliation. An old threat returns to Los Angeles that puts everything David loves in harm’s way.\",\"release_date\":\"2020-08-07\"},{\"popularity\":329.842,\"vote_count\":39,\"video\":false,\"poster_path\":\"\\/xqbQtMffXwa3oprse4jiHBMBvdW.jpg\",\"id\":601844,\"adult\":false,\"backdrop_path\":\"\\/qTrpw2ZUvN7ywUu1kieEsvNDrgQ.jpg\",\"original_language\":\"en\",\"original_title\":\"Becky\",\"genre_ids\":[28,27,53],\"title\":\"Becky\",\"vote_average\":4.9,\"overview\":\"A teenager's weekend at a lake house with her father takes a turn for the worse when a group of convicts wreaks havoc on their lives.\",\"release_date\":\"2020-07-23\"},{\"popularity\":414.694,\"vote_count\":125,\"video\":false,\"poster_path\":\"\\/aVbqhqYtlxwEGihTEhewZAgDOCX.jpg\",\"id\":489326,\"adult\":false,\"backdrop_path\":\"\\/dFB6Tiy3z2xRLbnEUB5ocApT5xG.jpg\",\"original_language\":\"en\",\"original_title\":\"Mortal\",\"genre_ids\":[28,14,53],\"title\":\"Mortal\",\"vote_average\":6.9,\"overview\":\"A young boy must discover the origins of his extraordinary powers before he is captured by authorities hell-bent on condemning him for an accidental murder.\",\"release_date\":\"2020-02-28\"},{\"popularity\":271.598,\"vote_count\":5568,\"video\":false,\"poster_path\":\"\\/aQvJ5WPzZgYVDrxLX4R6cLJCEaQ.jpg\",\"id\":454626,\"adult\":false,\"backdrop_path\":\"\\/stmYfCUGd8Iy6kAMBr6AmWqx8Bq.jpg\",\"original_language\":\"en\",\"original_title\":\"Sonic the Hedgehog\",\"genre_ids\":[28,35,878,10751],\"title\":\"Sonic the Hedgehog\",\"vote_average\":7.5,\"overview\":\"Based on the global blockbuster videogame franchise from Sega, Sonic the Hedgehog tells the story of the world’s speediest hedgehog as he embraces his new home on Earth. In this live-action adventure comedy, Sonic and his new best friend team up to defend the planet from the evil genius Dr. Robotnik and his plans for world domination.\",\"release_date\":\"2020-02-12\"},{\"popularity\":247.776,\"vote_count\":6380,\"video\":false,\"poster_path\":\"\\/iZf0KyrE25z1sage4SYFLCCrMi9.jpg\",\"id\":530915,\"adult\":false,\"backdrop_path\":\"\\/cqa3sa4c4jevgnEJwq3CMF8UfTG.jpg\",\"original_language\":\"en\",\"original_title\":\"1917\",\"genre_ids\":[28,18,36,10752],\"title\":\"1917\",\"vote_average\":7.9,\"overview\":\"At the height of the First World War, two young British soldiers must cross enemy territory and deliver a message that will stop a deadly attack on hundreds of soldiers.\",\"release_date\":\"2019-12-25\"},{\"popularity\":252.633,\"vote_count\":3041,\"video\":false,\"poster_path\":\"\\/f4aul3FyD3jv3v4bul1IrkWZvzq.jpg\",\"id\":508439,\"adult\":false,\"backdrop_path\":\"\\/xFxk4vnirOtUxpOEWgA1MCRfy6J.jpg\",\"original_language\":\"en\",\"original_title\":\"Onward\",\"genre_ids\":[12,16,35,14,10751],\"title\":\"Onward\",\"vote_average\":7.9,\"overview\":\"In a suburban fantasy world, two teenage elf brothers embark on an extraordinary quest to discover if there is still a little magic left out there.\",\"release_date\":\"2020-02-29\"},{\"popularity\":257.25,\"vote_count\":175,\"video\":false,\"poster_path\":\"\\/45FNxAIooJFqjsVaCJts9YJHXS4.jpg\",\"id\":340102,\"adult\":false,\"backdrop_path\":\"\\/eCIvqa3QVCx6H09bdeOS8Al2Sqy.jpg\",\"original_language\":\"en\",\"original_title\":\"The New Mutants\",\"genre_ids\":[28,12,27,878],\"title\":\"The New Mutants\",\"vote_average\":6.2,\"overview\":\"Five young mutants, just discovering their abilities while held in a secret facility against their will, fight to escape their past sins and save themselves.\",\"release_date\":\"2020-08-26\"},{\"popularity\":205.624,\"vote_count\":18,\"video\":false,\"poster_path\":\"\\/oB3LX9C3FbJvPtrk1J7qHQKvzLr.jpg\",\"id\":623958,\"adult\":false,\"backdrop_path\":\"\\/gQa5l8NrPHQzoqLeideAzuPMZQj.jpg\",\"original_language\":\"en\",\"original_title\":\"The Bay of Silence\",\"genre_ids\":[53],\"title\":\"The Bay of Silence\",\"vote_average\":3.7,\"overview\":\"Will believes his wife Rosalind is innocent of their son's suspected murder, only to discover the devastating truth behind her past links her to another unsolved crime.\",\"release_date\":\"2020-08-20\"},{\"popularity\":234.092,\"vote_count\":65,\"video\":false,\"poster_path\":\"\\/dxFqZiO5MqqVoFZuWOjTdjmDh6d.jpg\",\"id\":315064,\"adult\":false,\"backdrop_path\":\"\\/q5uZqd324Tug2xWxL72j18ZzK2Z.jpg\",\"original_language\":\"en\",\"original_title\":\"Animal Crackers\",\"genre_ids\":[12,16,35],\"title\":\"Animal Crackers\",\"vote_average\":6.4,\"overview\":\"A family must use a magical box of Animal Crackers to save a rundown circus from being taken over by their evil uncle Horatio P. Huntington.\",\"release_date\":\"2020-07-30\"},{\"popularity\":247.879,\"vote_count\":1251,\"video\":false,\"poster_path\":\"\\/k68nPLbIST6NP96JmTxmZijEvCA.jpg\",\"id\":577922,\"adult\":false,\"backdrop_path\":\"\\/wzJRB4MKi3yK138bJyuL9nx47y6.jpg\",\"original_language\":\"en\",\"original_title\":\"Tenet\",\"genre_ids\":[28,878,53],\"title\":\"Tenet\",\"vote_average\":7.5,\"overview\":\"Armed with only one word - Tenet - and fighting for the survival of the entire world, the Protagonist journeys through a twilight world of international espionage on a mission that will unfold in something beyond real time.\",\"release_date\":\"2020-08-22\"}],\"page\":1,\"total_results\":946,\"dates\":{\"maximum\":\"2020-09-07\",\"minimum\":\"2020-07-21\"},\"total_pages\":48}"
    }



}